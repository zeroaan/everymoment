{"version":3,"sources":["fbase.js","routes/AuthForm.js","routes/Auth.js","components/Aweet.js","components/AweetForm.js","routes/Home.js","components/Navigation.js","routes/Profile.js","components/Router.js","components/App.js","index.js"],"names":["firebase","apiKey","process","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firebaseInstance","authService","dbService","storageService","AuthForm","useState","email","setEmail","password","setPassword","newAccount","setNewAccount","error","setError","onChange","e","target","name","value","onSubmit","a","preventDefault","createUserWithEmailAndPassword","data","signInWithEmailAndPassword","console","log","operationType","message","type","placeholder","required","onClick","prev","Auth","onSocialClick","provider","auth","GoogleAuthProvider","GithubAuthProvider","signInWithPopup","Aweet","aweetObj","isOwner","editing","setEditing","text","newAweet","setNewAweet","onDeleteClick","window","confirm","doc","id","delete","attachmentUrl","refFromURL","toggleEditing","update","className","String","Date","createdAt","substring","src","width","height","alt","AweetFactory","userObj","aweet","setAweet","attachment","setAttachment","attachmentRef","ref","child","uid","uuidv4","putString","response","getDownloadURL","now","creatorId","collection","add","maxLength","onKeyPress","key","autoFocus","accept","theFile","files","reader","FileReader","onloadend","finishedEvent","result","currentTarget","readAsDataURL","Home","aweets","setAweets","useEffect","snapshot","orderBy","onSnapshot","aweetArray","docs","map","AweetForm","Navigation","to","replace","displayName","Profile","refreshUser","myAweets","setMyAweets","newDisplayName","setNewDisplayName","history","useHistory","updateProfile","where","signOut","push","AppRouter","isLoggedIn","exact","path","from","App","init","setInit","setUserObj","onAuthStateChanged","user","currentUser","Object","assign","Boolean","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.33462cea.chunk.js","sourcesContent":["import * as firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_API_KEY,\r\n  authDomain: process.env.REACT_APP_AUTH_DOMAIN,\r\n  databaseURL: process.env.REACT_APP_DATABASE_URL,\r\n  projectId: process.env.REACT_APP_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_MESSAGIN_ID,\r\n  appId: process.env.REACT_APP_APP_ID,\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nexport const firebaseInstance = firebase;\r\n\r\nexport const authService = firebase.auth();\r\nexport const dbService = firebase.firestore();\r\nexport const storageService = firebase.storage();\r\n","import React, { useState } from \"react\";\r\nimport { authService } from \"fbase\";\r\n\r\nconst AuthForm = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [newAccount, setNewAccount] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const onChange = (e) => {\r\n    // 아래와 같음: const { name, value } = e.target;\r\n    const {\r\n      target: { name, value },\r\n    } = e;\r\n    if (name === \"email\") {\r\n      setEmail(value);\r\n    } else if (name === \"password\") {\r\n      setPassword(value);\r\n    }\r\n  };\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      let data;\r\n      if (newAccount) {\r\n        data = await authService.createUserWithEmailAndPassword(\r\n          email,\r\n          password\r\n        );\r\n      } else {\r\n        data = await authService.signInWithEmailAndPassword(email, password);\r\n      }\r\n      console.log(data.operationType);\r\n    } catch (error) {\r\n      setError(error.message);\r\n    }\r\n  };\r\n  const toggleAccount = () => {\r\n    setNewAccount((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          required\r\n          value={email}\r\n          onChange={onChange}\r\n        />\r\n        <input\r\n          name=\"password\"\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          required\r\n          value={password}\r\n          onChange={onChange}\r\n        />\r\n        <input type=\"submit\" value={newAccount ? \"Create Account\" : \"Login\"} />\r\n        {error && <p>{error}</p>}\r\n      </form>\r\n      <span onClick={toggleAccount}>\r\n        {newAccount ? \"Sign in\" : \"Create Account\"}\r\n      </span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AuthForm;\r\n","import React from \"react\";\r\nimport { authService, firebaseInstance } from \"fbase\";\r\nimport AuthForm from \"routes/AuthForm\";\r\n\r\nconst Auth = () => {\r\n  const onSocialClick = async (e) => {\r\n    // 구글, 깃허브 로그인 하기\r\n    const { name } = e.target;\r\n    let provider;\r\n    if (name === \"google\") {\r\n      provider = new firebaseInstance.auth.GoogleAuthProvider();\r\n    } else if (name === \"github\") {\r\n      provider = new firebaseInstance.auth.GithubAuthProvider();\r\n    }\r\n    await authService.signInWithPopup(provider);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <AuthForm />\r\n      <div>\r\n        <button onClick={onSocialClick} name=\"google\">\r\n          Continue with Google\r\n        </button>\r\n        <button onClick={onSocialClick} name=\"github\">\r\n          Continue with Github\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default Auth;\r\n","import React, { useState } from \"react\";\r\nimport \"./Aweet.css\";\r\nimport { dbService, storageService } from \"fbase\";\r\n\r\nconst Aweet = ({ aweetObj, isOwner }) => {\r\n  const [editing, setEditing] = useState(false);\r\n  const [newAweet, setNewAweet] = useState(aweetObj.text);\r\n  const onDeleteClick = async () => {\r\n    const ok = window.confirm(\"Are you sure you want to delete this aweet?\");\r\n    if (ok) {\r\n      await dbService.doc(`aweets/${aweetObj.id}`).delete();\r\n      if (aweetObj.attachmentUrl) {\r\n        await storageService.refFromURL(aweetObj.attachmentUrl).delete();\r\n      }\r\n    }\r\n  };\r\n  const toggleEditing = () => {\r\n    setEditing((prev) => !prev);\r\n  };\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    await dbService.doc(`aweets/${aweetObj.id}`).update({\r\n      text: newAweet,\r\n    });\r\n    setEditing(false);\r\n  };\r\n  const onChange = (e) => {\r\n    const { value } = e.target;\r\n    setNewAweet(value);\r\n  };\r\n  return (\r\n    <>\r\n      {editing ? (\r\n        <>\r\n          <div className=\"aweet\">\r\n            <form onSubmit={onSubmit}>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Edit your aweet\"\r\n                value={newAweet}\r\n                onChange={onChange}\r\n                required\r\n              />\r\n              <input type=\"submit\" value=\"Update Aweet\" />\r\n            </form>\r\n            <button onClick={toggleEditing}>cancel</button>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"aweet\">\r\n            <h4>{aweetObj.text}</h4>\r\n            <h5>{String(new Date(aweetObj.createdAt)).substring(0, 24)}</h5>\r\n            {aweetObj.attachmentUrl && (\r\n              <img\r\n                src={aweetObj.attachmentUrl}\r\n                width=\"50px\"\r\n                height=\"50px\"\r\n                alt=\"attachment\"\r\n              />\r\n            )}\r\n            {isOwner && (\r\n              <div className=\"aweet__button\">\r\n                <button onClick={onDeleteClick}>Delete Aweet</button>\r\n                <button onClick={toggleEditing}>Edit Aweet</button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Aweet;\r\n","import React, { useState } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { dbService, storageService } from \"fbase\";\r\n\r\nconst AweetFactory = ({ userObj }) => {\r\n  const [aweet, setAweet] = useState(\"\");\r\n  const [attachment, setAttachment] = useState(\"\");\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    // 글추가\r\n    // await dbService.collection(\"aweets\").add({\r\n    //   text: aweet,\r\n    //   createdAt: Date.now(),\r\n    //   creatorId: userObj.uid,\r\n    // });\r\n    // setAweet(\"\");\r\n\r\n    // 사진 추가\r\n    let attachmentUrl = \"\";\r\n    if (attachment !== \"\") {\r\n      const attachmentRef = storageService\r\n        .ref()\r\n        .child(`${userObj.uid}/${uuidv4()}`);\r\n      const response = await attachmentRef.putString(attachment, \"data_url\");\r\n      attachmentUrl = await response.ref.getDownloadURL();\r\n    }\r\n    if (aweet !== \"\") {\r\n      const aweetObj = {\r\n        text: aweet,\r\n        createdAt: Date.now(),\r\n        creatorId: userObj.uid,\r\n        attachmentUrl,\r\n      };\r\n      await dbService.collection(\"aweets\").add(aweetObj);\r\n      setAweet(\"\");\r\n      setAttachment(\"\");\r\n    }\r\n  };\r\n  const onKeyPress = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n  const onChange = (e) => {\r\n    const { value } = e.target;\r\n    setAweet(value);\r\n  };\r\n  const onFileChange = (e) => {\r\n    const { files } = e.target;\r\n    const theFile = files[0];\r\n    const reader = new FileReader();\r\n    reader.onloadend = (finishedEvent) => {\r\n      const { result } = finishedEvent.currentTarget;\r\n      setAttachment(result);\r\n    };\r\n    reader.readAsDataURL(theFile);\r\n  };\r\n  const onClearAttachment = () => {\r\n    setAttachment(null);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          value={aweet}\r\n          onChange={onChange}\r\n          placeholder=\"What's on your mind?\"\r\n          maxLength={120}\r\n          onKeyPress={onKeyPress}\r\n          autoFocus={true}\r\n        />\r\n        <input type=\"file\" accept=\"image/*\" onChange={onFileChange} />\r\n\r\n        <input type=\"submit\" value=\"Aweet\" />\r\n        {attachment && (\r\n          <div>\r\n            <img src={attachment} alt=\"img\" width=\"50px\" height=\"50px\" />\r\n            <button onClick={onClearAttachment}>Clear</button>\r\n          </div>\r\n        )}\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AweetFactory;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { dbService } from \"fbase\";\r\nimport Aweet from \"components/Aweet\";\r\nimport AweetForm from \"components/AweetForm\";\r\n\r\nconst Home = ({ userObj }) => {\r\n  const [aweets, setAweets] = useState([]);\r\n\r\n  /* 실시간 X \r\n  const getAweets = async () => {\r\n    const dbAweets = await dbService.collection(\"aweets\").get();\r\n    dbAweets.forEach((document) => {\r\n      const aweetObject = {\r\n        ...document.data(),\r\n        id: document.id,\r\n      };\r\n      setAweets((prev) => [aweetObject, ...prev]);\r\n    });\r\n  };\r\n  */\r\n  useEffect(() => {\r\n    // getAweets();\r\n    // 실시간 O\r\n    const snapshot = dbService\r\n      .collection(\"aweets\")\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .onSnapshot((snapshot) => {\r\n        const aweetArray = snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setAweets(aweetArray);\r\n      });\r\n    return () => {\r\n      snapshot();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <AweetForm userObj={userObj} />\r\n      <div>\r\n        {aweets.map((aweet) => (\r\n          <Aweet\r\n            key={aweet.id}\r\n            aweetObj={aweet}\r\n            isOwner={aweet.creatorId === userObj.uid}\r\n          />\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Navigation = ({ userObj }) => {\r\n  return (\r\n    <>\r\n      <nav>\r\n        <ul>\r\n          <li>\r\n            <Link to=\"/\" replace>\r\n              Home\r\n            </Link>\r\n          </li>\r\n          <li>\r\n            <Link to=\"/profile\" replace>\r\n              {userObj.displayName ? (\r\n                <>{userObj.displayName}의 Profile</>\r\n              ) : (\r\n                <>{\"익명\" + String(userObj.uid).substring(3, 9)}의 Profile</>\r\n              )}\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </nav>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { authService, dbService } from \"fbase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Aweet from \"components/Aweet\";\r\n\r\nconst Profile = ({ refreshUser, userObj }) => {\r\n  const [myAweets, setMyAweets] = useState([]);\r\n  const [newDisplayName, setNewDisplayName] = useState(\r\n    userObj.displayName || \"익명\" + String(userObj.uid).substring(3, 9)\r\n  );\r\n  const history = useHistory();\r\n  const onLogOutClick = () => {\r\n    authService.signOut();\r\n    history.push(\"/\");\r\n  };\r\n  const onChange = (e) => {\r\n    const { value } = e.target;\r\n    setNewDisplayName(value);\r\n  };\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (userObj.displayName !== newDisplayName) {\r\n      await userObj.updateProfile({\r\n        displayName: newDisplayName,\r\n      });\r\n      refreshUser();\r\n    }\r\n  };\r\n  const onKeyPress = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const snapshot = dbService\r\n      .collection(\"aweets\")\r\n      .where(\"creatorId\", \"==\", userObj.uid)\r\n      .orderBy(\"createdAt\", \"desc\")\r\n      .onSnapshot((snapshot) => {\r\n        const aweetArray = snapshot.docs.map((doc) => ({\r\n          id: doc.id,\r\n          ...doc.data(),\r\n        }));\r\n        setMyAweets(aweetArray);\r\n      });\r\n\r\n    return () => {\r\n      snapshot();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <form onSubmit={onSubmit}>\r\n        <input\r\n          onChange={onChange}\r\n          type=\"text\"\r\n          placeholder=\"Display name\"\r\n          value={newDisplayName}\r\n          onKeyPress={onKeyPress}\r\n        />\r\n        <input type=\"submit\" value=\"Update name\" />\r\n      </form>\r\n      <button onClick={onLogOutClick}>Log out</button>\r\n\r\n      {myAweets.map((aweet) => (\r\n        <Aweet\r\n          key={aweet.id}\r\n          aweetObj={aweet}\r\n          isOwner={aweet.creatorId === userObj.uid}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n","import React from \"react\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Redirect,\r\n  Route,\r\n  Switch,\r\n} from \"react-router-dom\";\r\nimport Auth from \"routes/Auth\";\r\nimport Home from \"routes/Home\";\r\nimport Navigation from \"components/Navigation\";\r\nimport Profile from \"routes/Profile\";\r\n\r\nconst AppRouter = ({ refreshUser, isLoggedIn, userObj }) => {\r\n  return (\r\n    <Router>\r\n      {isLoggedIn && <Navigation userObj={userObj} />}\r\n      <Switch>\r\n        {isLoggedIn ? (\r\n          <>\r\n            <Route exact path=\"/\">\r\n              <Home userObj={userObj} />\r\n            </Route>\r\n            <Route exact path=\"/profile\">\r\n              <Profile userObj={userObj} refreshUser={refreshUser} />\r\n            </Route>\r\n            <Redirect from=\"*\" to=\"/\" />\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Route exact path=\"/\">\r\n              <Auth />\r\n            </Route>\r\n            <Redirect from=\"*\" to=\"/\" />\r\n          </>\r\n        )}\r\n      </Switch>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default AppRouter;\r\n","import React, { useEffect, useState } from \"react\";\nimport AppRouter from \"components/Router\";\nimport { authService } from \"fbase\";\n\nconst App = () => {\n  const [init, setInit] = useState(false);\n  const [userObj, setUserObj] = useState(null);\n\n  useEffect(() => {\n    authService.onAuthStateChanged((user) => {\n      if (user) {\n        setUserObj(user);\n      } else {\n        setUserObj(null);\n      }\n      setInit(true);\n    });\n  });\n  const refreshUser = () => {\n    const user = authService.currentUser;\n    setUserObj(Object.assign({}, user));\n  };\n\n  return (\n    <>\n      {init ? (\n        <AppRouter\n          refreshUser={refreshUser}\n          isLoggedIn={Boolean(userObj)}\n          userObj={userObj}\n        />\n      ) : (\n        \"Initializing...\"\n      )}\n    </>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}